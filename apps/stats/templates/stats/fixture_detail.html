{% extends 'base.html' %}
{% load tz %}

{% block title %}{{ object.title }} {% endblock %}

{% block content %}
    <h1>{{ object.title }}</h1>

    <div class="well">
        <h3>{{ object.competition_year.competition }}</h3>

        <div>
            {% if object.venue %}
                Venue: {{ object.venue }}
            {% endif %}
        </div>
        <div>
            {% if object.broadcast_on %}
                Live on {{ object.broadcast_on }}
            {% endif %}
        </div>
        <div>
            Date:
            <span class="date">{{ object.datetime|date:'d' }}</span>
            <span class="month">{{ object.datetime|date:'F' }}</span>
            <span class="year">{{ object.datetime|date:'Y' }}</span>,
            <span class="day">{{ object.datetime|date:'l' }}</span>
        </div>
        <div>
            Kick-off:
            <span class="time">{{ object.datetime|date:'P' }} NPT</span> <span class="utc-time">({% timezone "UTC" %}
            {{ object.datetime|date:'P' }}{% endtimezone %} UTC)</span>
        </div>
    </div>

    {% if object.is_upcoming %}
    {% else %}
        <div class="well">
            <h2>{{ object.score }}</h2>

            {% if object.data and object.data.ht_score %}
                <div>Half Time Score: {{ object.data.ht_score }}</div>
                <br/>
            {% endif %}

            {% if object.remarks %}
                <div>{{ object.remarks }}</div><br/>
            {% endif %}

            <div class="goals">
                <h3>Goals</h3>

                <div class="row">
                    <div class="col-sm-12 col-md-6">
                        {% if object.is_home_game %}
                            <h4>Manchester United</h4>
                            {% for goal in object.goals.all %}
                                <div>
                                    <a href="{{ goal.scorer.get_absolute_url }}">{{ goal.scorer }}</a> {{ goal.time }}'
                                    {% if goal.penalty %}
                                        (P){% endif %}{% if goal.own_goal %}(OG){% endif %}
                                </div>
                            {% endfor %}
                        {% else %}
                            <h4>{{ object.opponent }}</h4>
                            {% for event in object.data.events %}
                                {% if event.type == 'goal' and event.team == 'home' %}
                                    {{ event.scorer }} {{ event.m }}' [{{ event.text }}]
                                    {% if event.og %} [OG] {% endif %}
                                {% endif %}
                            {% endfor %}
                        {% endif %}
                    </div>
                    <div class="col-sm-12 col-md-6">
                        {% if object.is_home_game %}
                            <h4>{{ object.opponent }}</h4>
                            {% for event in object.data.events %}
                                {% if event.type == 'goal' and event.team == 'away' %}
                                    {{ event.scorer }} {{ event.m }}' [{{ event.score }}]
                                {% endif %}
                            {% endfor %}
                        {% else %}
                            <h4>Manchester United</h4>
                            {% for goal in object.goals.all %}
                                <div>
                                    <a href="{{ goal.scorer.get_absolute_url }}">{{ goal.scorer }}</a> {{ goal.time }}'
                                    {% if goal.penalty %}
                                        (P){% endif %}{% if goal.own_goal %}(OG){% endif %}
                                </div>
                            {% endfor %}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    {% endif %}

{% endblock %}